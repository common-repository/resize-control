!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(e="undefined"!=typeof globalThis?globalThis:e||self).imageCompression=r()}(this,function(){"use strict";function e(e,n){return new Promise(function(i,_){let f;return r(e).then(function(e){try{return f=e,i(new Blob([n.slice(0,2),f,n.slice(2)],{type:"image/jpeg"}))}catch(r){return _(r)}},_)})}let r=e=>new Promise((r,n)=>{let i=new FileReader;i.addEventListener("load",({target:{result:e}})=>{let i=new DataView(e),_=0;if(65496!==i.getUint16(_))return n("not a valid JPEG");for(_+=2;;){let f=i.getUint16(_);if(65498===f)break;let l=i.getUint16(_+2);if(65505===f&&1165519206===i.getUint32(_+4)){let o=_+10,$;switch(i.getUint16(o)){case 18761:$=!0;break;case 19789:$=!1;break;default:return n("TIFF header contains invalid endian")}if(42!==i.getUint16(o+2,$))return n("TIFF header contains invalid version");let a=i.getUint32(o+4,$),s=o+a+2+12*i.getUint16(o+a,$);for(let u=o+a+2;u<s;u+=12)if(274==i.getUint16(u,$)){if(3!==i.getUint16(u+2,$))return n("Orientation data type is invalid");if(1!==i.getUint32(u+4,$))return n("Orientation data count is invalid");i.setUint16(u+8,1,$);break}return r(e.slice(_,_+2+l))}_+=2+l}return r(new Blob)}),i.readAsArrayBuffer(e)});var n,i,_,f,l,o,$={};n={get exports(){return $},set exports(t){$=t}},f={},n.exports=f,f.parse=function(e,r){for(var n=f.bin.readUshort,i=f.bin.readUint,_=0,l={},o=new Uint8Array(e),$=o.length-4;101010256!=i(o,$);)$--;_=$,_+=4;var a=n(o,_+=4);n(o,_+=2);var s=i(o,_+=2),u=i(o,_+=4);_+=4,_=u;for(var c=0;c<a;c++){i(o,_),_+=4,_+=4,_+=4,i(o,_+=4),s=i(o,_+=4);var h=i(o,_+=4),d=n(o,_+=4),A=n(o,_+2),g=n(o,_+4);_+=6;var p=i(o,_+=8);_+=4,_+=d+A+g,f._readLocal(o,p,l,s,h,r)}return l},f._readLocal=function(e,r,n,i,_,l){var o=f.bin.readUshort,$=f.bin.readUint;$(e,r),o(e,r+=4),o(e,r+=2);var a=o(e,r+=2);$(e,r+=2),$(e,r+=4),r+=4;var s=o(e,r+=8),u=o(e,r+=2);r+=2;var c=f.bin.readUTF8(e,r,s);if(r+=s,r+=u,l)n[c]={size:_,csize:i};else{var h=new Uint8Array(e.buffer,r);if(0==a)n[c]=new Uint8Array(h.buffer.slice(r,r+i));else{if(8!=a)throw"unknown compression method: "+a;var d=new Uint8Array(_);f.inflateRaw(h,d),n[c]=d}}},f.inflateRaw=function(e,r){return f.F.inflate(e,r)},f.inflate=function(e,r){return e[0],e[1],f.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),r)},f.deflate=function(e,r){null==r&&(r={level:6});var n=0,i=new Uint8Array(50+Math.floor(1.1*e.length));i[n]=120,i[n+1]=156,n+=2,n=f.F.deflateRaw(e,i,n,r.level);var _=f.adler(e,0,e.length);return i[n+0]=_>>>24&255,i[n+1]=_>>>16&255,i[n+2]=_>>>8&255,i[n+3]=_>>>0&255,new Uint8Array(i.buffer,0,n+4)},f.deflateRaw=function(e,r){null==r&&(r={level:6});var n=new Uint8Array(50+Math.floor(1.1*e.length)),i=f.F.deflateRaw(e,n,i,r.level);return new Uint8Array(n.buffer,0,i)},f.encode=function(e,r){null==r&&(r=!1);var n=0,i=f.bin.writeUint,_=f.bin.writeUshort,l={};for(var o in e){var $=!f._noNeed(o)&&!r,a=e[o],s=f.crc.crc(a,0,a.length);l[o]={cpr:$,usize:a.length,crc:s,file:$?f.deflateRaw(a):a}}for(var o in l)n+=l[o].file.length+30+46+2*f.bin.sizeUTF8(o);n+=22;var u=new Uint8Array(n),c=0,h=[];for(var o in l){var d=l[o];h.push(c),c=f._writeHeader(u,c,o,d,0)}var A=0,g=c;for(var o in l)d=l[o],h.push(c),c=f._writeHeader(u,c,o,d,1,h[A++]);var p=c-g;return i(u,c,101010256),c+=4,_(u,c+=4,A),_(u,c+=2,A),i(u,c+=2,p),i(u,c+=4,g),c+=4,c+=2,u.buffer},f._noNeed=function(e){var r=e.split(".").pop().toLowerCase();return -1!="png,jpg,jpeg,zip".indexOf(r)},f._writeHeader=function(e,r,n,i,_,l){var o=f.bin.writeUint,$=f.bin.writeUshort,a=i.file;return o(e,r,0==_?67324752:33639248),r+=4,1==_&&(r+=2),$(e,r,20),$(e,r+=2,0),$(e,r+=2,i.cpr?8:0),o(e,r+=2,0),o(e,r+=4,i.crc),o(e,r+=4,a.length),o(e,r+=4,i.usize),$(e,r+=4,f.bin.sizeUTF8(n)),$(e,r+=2,0),r+=2,1==_&&(r+=2,r+=2,o(e,r+=6,l),r+=4),r+=f.bin.writeUTF8(e,r,n),0==_&&(e.set(a,r),r+=a.length),r},f.crc={table:function(){for(var e=new Uint32Array(256),r=0;r<256;r++){for(var n=r,i=0;i<8;i++)1&n?n=3988292384^n>>>1:n>>>=1;e[r]=n}return e}(),update:function(e,r,n,i){for(var _=0;_<i;_++)e=f.crc.table[255&(e^r[n+_])]^e>>>8;return e},crc:function(e,r,n){return 4294967295^f.crc.update(4294967295,e,r,n)}},f.adler=function(e,r,n){for(var i=1,_=0,f=r,l=r+n;f<l;){for(var o=Math.min(f+5552,l);f<o;)_+=i+=e[f++];i%=65521,_%=65521}return _<<16|i},f.bin={readUshort:function(e,r){return e[r]|e[r+1]<<8},writeUshort:function(e,r,n){e[r]=255&n,e[r+1]=n>>8&255},readUint:function(e,r){return 16777216*e[r+3]+(e[r+2]<<16|e[r+1]<<8|e[r])},writeUint:function(e,r,n){e[r]=255&n,e[r+1]=n>>8&255,e[r+2]=n>>16&255,e[r+3]=n>>24&255},readASCII:function(e,r,n){for(var i="",_=0;_<n;_++)i+=String.fromCharCode(e[r+_]);return i},writeASCII:function(e,r,n){for(var i=0;i<n.length;i++)e[r+i]=n.charCodeAt(i)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,r,n){for(var i,_="",l=0;l<n;l++)_+="%"+f.bin.pad(e[r+l].toString(16));try{i=decodeURIComponent(_)}catch(o){return f.bin.readASCII(e,r,n)}return i},writeUTF8:function(e,r,n){for(var i=n.length,_=0,f=0;f<i;f++){var l=n.charCodeAt(f);if(0==(4294967168&l))e[r+_]=l,_++;else if(0==(4294965248&l))e[r+_]=192|l>>6,e[r+_+1]=128|l>>0&63,_+=2;else if(0==(4294901760&l))e[r+_]=224|l>>12,e[r+_+1]=128|l>>6&63,e[r+_+2]=128|l>>0&63,_+=3;else{if(0!=(4292870144&l))throw"e";e[r+_]=240|l>>18,e[r+_+1]=128|l>>12&63,e[r+_+2]=128|l>>6&63,e[r+_+3]=128|l>>0&63,_+=4}}return _},sizeUTF8:function(e){for(var r=e.length,n=0,i=0;i<r;i++){var _=e.charCodeAt(i);if(0==(4294967168&_))n++;else if(0==(4294965248&_))n+=2;else if(0==(4294901760&_))n+=3;else{if(0!=(4292870144&_))throw"e";n+=4}}return n}},f.F={},f.F.deflateRaw=function(e,r,n,i){var _=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1],][i],l=f.F.U,o=f.F._goodIndex;f.F._hash;var $=f.F._putsE,a=0,s=n<<3,u=0,c=e.length;if(0==i){for(;a<c;)$(r,s,a+(F=Math.min(65535,c-a))==c?1:0),s=f.F._copyExact(e,a,F,r,s+8),a+=F;return s>>>3}var h=l.lits,d=l.strt,A=l.prev,g=0,p=0,w=0,v=0,b=0,m=0;for(c>2&&(d[m=f.F._hash(e,0)]=0),a=0;a<c;a++){if(b=m,a+1<c-2){m=f.F._hash(e,a+1);var E=a+1&32767;A[E]=d[m],d[m]=E}if(u<=a){(g>14e3||p>26697)&&c-a>100&&(u<a&&(h[g]=a-u,g+=2,u=a),s=f.F._writeBlock(a==c-1||u==c?1:0,h,g,v,e,w,a-w,r,s),g=p=v=0,w=a);var y=0;a<c-2&&(y=f.F._bestMatch(e,a,A,b,Math.min(_[2],c-a),_[3]));var F=y>>>16,B=65535&y;if(0!=y){B=65535&y;var Q=o(F=y>>>16,l.of0);l.lhst[257+Q]++;var I=o(B,l.df0);l.dhst[I]++,v+=l.exb[Q]+l.dxb[I],h[g]=F<<23|a-u,h[g+1]=B<<16|Q<<8|I,g+=2,u=a+F}else l.lhst[e[a]]++;p++}}for(w==a&&0!=e.length||(u<a&&(h[g]=a-u,g+=2,u=a),s=f.F._writeBlock(1,h,g,v,e,w,a-w,r,s),g=0,p=0,g=p=v=0,w=a);0!=(7&s);)s++;return s>>>3},f.F._bestMatch=function(e,r,n,i,_,l){var o=32767&r,$=n[o],a=o-$+32768&32767;if($==o||i!=f.F._hash(e,r-a))return 0;for(var s=0,u=0,c=Math.min(32767,r);a<=c&&0!=--l&&$!=o;){if(0==s||e[r+s]==e[r+s-a]){var h=f.F._howLong(e,r,a);if(h>s){if(u=a,(s=h)>=_)break;a+2<h&&(h=a+2);for(var d=0,A=0;A<h-2;A++){var g=r-a+A+32768&32767,p=g-n[g]+32768&32767;p>d&&(d=p,$=g)}}}a+=(o=$)-($=n[o])+32768&32767}return s<<16|u},f.F._howLong=function(e,r,n){if(e[r]!=e[r-n]||e[r+1]!=e[r+1-n]||e[r+2]!=e[r+2-n])return 0;var i=r,_=Math.min(e.length,r+258);for(r+=3;r<_&&e[r]==e[r-n];)r++;return r-i},f.F._hash=function(e,r){return(e[r]<<8|e[r+1])+(e[r+2]<<4)&65535},f.saved=0,f.F._writeBlock=function(e,r,n,i,_,l,o,$,a){var s,u,c,h,d,A,g,p,w,v,b,m=f.F.U,E=f.F._putsF,y=f.F._putsE;m.lhst[256]++,h=(c=f.F.getTrees())[0],d=c[1],A=c[2],g=c[3],p=c[4],w=c[5],v=c[6],b=c[7];var F=32+(0==(a+3&7)?0:8-(a+3&7))+(o<<3),B=i+f.F.contSize(m.fltree,m.lhst)+f.F.contSize(m.fdtree,m.dhst),Q=i+f.F.contSize(m.ltree,m.lhst)+f.F.contSize(m.dtree,m.dhst);Q+=14+3*w+f.F.contSize(m.itree,m.ihst)+(2*m.ihst[16]+3*m.ihst[17]+7*m.ihst[18]);for(var I=0;I<286;I++)m.lhst[I]=0;for(I=0;I<30;I++)m.dhst[I]=0;for(I=0;I<19;I++)m.ihst[I]=0;var C=F<B&&F<Q?0:B<Q?1:2;if(E($,a,e),E($,a+1,C),a+=3,0==C){for(;0!=(7&a);)a++;a=f.F._copyExact(_,l,o,$,a)}else{if(1==C&&(s=m.fltree,u=m.fdtree),2==C){f.F.makeCodes(m.ltree,h),f.F.revCodes(m.ltree,h),f.F.makeCodes(m.dtree,d),f.F.revCodes(m.dtree,d),f.F.makeCodes(m.itree,A),f.F.revCodes(m.itree,A),s=m.ltree,u=m.dtree,y($,a,g-257),y($,a+=5,p-1),y($,a+=5,w-4),a+=4;for(var U=0;U<w;U++)y($,a+3*U,m.itree[1+(m.ordr[U]<<1)]);a+=3*w,a=f.F._codeTiny(v,m.itree,$,a),a=f.F._codeTiny(b,m.itree,$,a)}for(var x=l,T=0;T<n;T+=2){for(var R=r[T],S=R>>>23,H=x+(8388607&R);x<H;)a=f.F._writeLit(_[x++],s,$,a);if(0!=S){var M=r[T+1],O=M>>16,L=M>>8&255,k=255&M;y($,a=f.F._writeLit(257+L,s,$,a),S-m.of0[L]),a+=m.exb[L],E($,a=f.F._writeLit(k,u,$,a),O-m.df0[k]),a+=m.dxb[k],x+=S}}a=f.F._writeLit(256,s,$,a)}return a},f.F._copyExact=function(e,r,n,i,_){var f=_>>>3;return i[f]=n,i[f+1]=n>>>8,i[f+2]=255-i[f],i[f+3]=255-i[f+1],f+=4,i.set(new Uint8Array(e.buffer,r,n),f),_+(n+4<<3)},f.F.getTrees=function(){for(var e=f.F.U,r=f.F._hufTree(e.lhst,e.ltree,15),n=f.F._hufTree(e.dhst,e.dtree,15),i=[],_=f.F._lenCodes(e.ltree,i),l=[],o=f.F._lenCodes(e.dtree,l),$=0;$<i.length;$+=2)e.ihst[i[$]]++;for($=0;$<l.length;$+=2)e.ihst[l[$]]++;for(var a=f.F._hufTree(e.ihst,e.itree,7),s=19;s>4&&0==e.itree[1+(e.ordr[s-1]<<1)];)s--;return[r,n,a,_,o,s,i,l]},f.F.getSecond=function(e){for(var r=[],n=0;n<e.length;n+=2)r.push(e[n+1]);return r},f.F.nonZero=function(e){for(var r="",n=0;n<e.length;n+=2)0!=e[n+1]&&(r+=(n>>1)+",");return r},f.F.contSize=function(e,r){for(var n=0,i=0;i<r.length;i++)n+=r[i]*e[1+(i<<1)];return n},f.F._codeTiny=function(e,r,n,i){for(var _=0;_<e.length;_+=2){var l=e[_],o=e[_+1];i=f.F._writeLit(l,r,n,i);var $=16==l?2:17==l?3:7;l>15&&(f.F._putsE(n,i,o,$),i+=$)}return i},f.F._lenCodes=function(e,r){for(var n=e.length;2!=n&&0==e[n-1];)n-=2;for(var i=0;i<n;i+=2){var _=e[i+1],f=i+3<n?e[i+3]:-1,l=i+5<n?e[i+5]:-1,o=0==i?-1:e[i-1];if(0==_&&f==_&&l==_){for(var $=i+5;$+2<n&&e[$+2]==_;)$+=2;(a=Math.min($+1-i>>>1,138))<11?r.push(17,a-3):r.push(18,a-11),i+=2*a-2}else if(_==o&&f==_&&l==_){for($=i+5;$+2<n&&e[$+2]==_;)$+=2;var a=Math.min($+1-i>>>1,6);r.push(16,a-3),i+=2*a-2}else r.push(_,0)}return n>>>1},f.F._hufTree=function(e,r,n){var i=[],_=e.length,l=r.length,o=0;for(o=0;o<l;o+=2)r[o]=0,r[o+1]=0;for(o=0;o<_;o++)0!=e[o]&&i.push({lit:o,f:e[o]});var $=i.length,a=i.slice(0);if(0==$)return 0;if(1==$){var s=i[0].lit;return a=0==s?1:0,r[1+(s<<1)]=1,r[1+(a<<1)]=1,1}i.sort(function(e,r){return e.f-r.f});var u=i[0],c=i[1],h=0,d=1,A=2;for(i[0]={lit:-1,f:u.f+c.f,l:u,r:c,d:0};d!=$-1;)u=h!=d&&(A==$||i[h].f<i[A].f)?i[h++]:i[A++],c=h!=d&&(A==$||i[h].f<i[A].f)?i[h++]:i[A++],i[d++]={lit:-1,f:u.f+c.f,l:u,r:c};var g=f.F.setDepth(i[d-1],0);for(g>n&&(f.F.restrictDepth(a,n,g),g=n),o=0;o<$;o++)r[1+(a[o].lit<<1)]=a[o].d;return g},f.F.setDepth=function(e,r){return -1!=e.lit?(e.d=r,r):Math.max(f.F.setDepth(e.l,r+1),f.F.setDepth(e.r,r+1))},f.F.restrictDepth=function(e,r,n){var i=0,_=1<<n-r,f=0;for(e.sort(function(e,r){return r.d==e.d?e.f-r.f:r.d-e.d}),i=0;i<e.length&&e[i].d>r;i++){var l=e[i].d;e[i].d=r,f+=_-(1<<n-l)}for(f>>>=n-r;f>0;)(l=e[i].d)<r?(e[i].d++,f-=1<<r-l-1):i++;for(;i>=0;i--)e[i].d==r&&f<0&&(e[i].d--,f++);0!=f&&console.log("debt left")},f.F._goodIndex=function(e,r){var n=0;return r[16|n]<=e&&(n|=16),r[8|n]<=e&&(n|=8),r[4|n]<=e&&(n|=4),r[2|n]<=e&&(n|=2),r[1|n]<=e&&(n|=1),n},f.F._writeLit=function(e,r,n,i){return f.F._putsF(n,i,r[e<<1]),i+r[1+(e<<1)]},f.F.inflate=function(e,r){var n=Uint8Array;if(3==e[0]&&0==e[1])return r||new n(0);var i=f.F,_=i._bitsF,l=i._bitsE,o=i._decodeTiny,$=i.makeCodes,a=i.codes2map,s=i._get17,u=i.U,c=null==r;c&&(r=new n(e.length>>>2<<3));for(var h,d,A=0,g=0,p=0,w=0,v=0,b=0,m=0,E=0,y=0;0==A;)if(A=_(e,y,1),g=_(e,y+1,2),y+=3,0!=g){if(c&&(r=f.F._check(r,E+131072)),1==g&&(h=u.flmap,d=u.fdmap,b=511,m=31),2==g){p=l(e,y,5)+257,w=l(e,y+5,5)+1,v=l(e,y+10,4)+4,y+=14;for(var F=0;F<38;F+=2)u.itree[F]=0,u.itree[F+1]=0;var B=1;for(F=0;F<v;F++){var Q=l(e,y+3*F,3);u.itree[1+(u.ordr[F]<<1)]=Q,Q>B&&(B=Q)}y+=3*v,$(u.itree,B),a(u.itree,B,u.imap),h=u.lmap,d=u.dmap,y=o(u.imap,(1<<B)-1,p+w,e,y,u.ttree);var I=i._copyOut(u.ttree,0,p,u.ltree);b=(1<<I)-1;var C=i._copyOut(u.ttree,p,w,u.dtree);m=(1<<C)-1,$(u.ltree,I),a(u.ltree,I,h),$(u.dtree,C),a(u.dtree,C,d)}for(;;){var U=h[s(e,y)&b];y+=15&U;var x=U>>>4;if(x>>>8==0)r[E++]=x;else{if(256==x)break;var T=E+x-254;if(x>264){var R=u.ldef[x-257];T=E+(R>>>3)+l(e,y,7&R),y+=7&R}var S=d[s(e,y)&m];y+=15&S;var H=S>>>4,M=u.ddef[H],O=(M>>>4)+_(e,y,15&M);for(y+=15&M,c&&(r=f.F._check(r,E+131072));E<T;)r[E]=r[E++-O],r[E]=r[E++-O],r[E]=r[E++-O],r[E]=r[E++-O];E=T}}}else{0!=(7&y)&&(y+=8-(7&y));var L=4+(y>>>3),k=e[L-4]|e[L-3]<<8;c&&(r=f.F._check(r,E+k)),r.set(new n(e.buffer,e.byteOffset+L,k),E),y=L+k<<3,E+=k}return r.length==E?r:r.slice(0,E)},f.F._check=function(e,r){var n=e.length;if(r<=n)return e;var i=new Uint8Array(Math.max(n<<1,r));return i.set(e,0),i},f.F._decodeTiny=function(e,r,n,i,_,l){for(var o=f.F._bitsE,$=f.F._get17,a=0;a<n;){var s=e[$(i,_)&r];_+=15&s;var u=s>>>4;if(u<=15)l[a]=u,a++;else{var c=0,h=0;16==u?(h=3+o(i,_,2),_+=2,c=l[a-1]):17==u?(h=3+o(i,_,3),_+=3):18==u&&(h=11+o(i,_,7),_+=7);for(var d=a+h;a<d;)l[a]=c,a++}}return _},f.F._copyOut=function(e,r,n,i){for(var _=0,f=0,l=i.length>>>1;f<n;){var o=e[f+r];i[f<<1]=0,i[1+(f<<1)]=o,o>_&&(_=o),f++}for(;f<l;)i[f<<1]=0,i[1+(f<<1)]=0,f++;return _},f.F.makeCodes=function(e,r){for(var n,i,_,l,o=f.F.U,$=e.length,a=o.bl_count,s=0;s<=r;s++)a[s]=0;for(s=1;s<$;s+=2)a[e[s]]++;var u=o.next_code;for(n=0,a[0]=0,i=1;i<=r;i++)n=n+a[i-1]<<1,u[i]=n;for(_=0;_<$;_+=2)0!=(l=e[_+1])&&(e[_]=u[l],u[l]++)},f.F.codes2map=function(e,r,n){for(var i=e.length,_=f.F.U.rev15,l=0;l<i;l+=2)if(0!=e[l+1])for(var o=l>>1,$=e[l+1],a=o<<4|$,s=r-$,u=e[l]<<s,c=u+(1<<s);u!=c;)n[_[u]>>>15-r]=a,u++},f.F.revCodes=function(e,r){for(var n=f.F.U.rev15,i=15-r,_=0;_<e.length;_+=2){var l=e[_]<<r-e[_+1];e[_]=n[l]>>>i}},f.F._putsE=function(e,r,n){n<<=7&r;var i=r>>>3;e[i]|=n,e[i+1]|=n>>>8},f.F._putsF=function(e,r,n){n<<=7&r;var i=r>>>3;e[i]|=n,e[i+1]|=n>>>8,e[i+2]|=n>>>16},f.F._bitsE=function(e,r,n){return(e[r>>>3]|e[1+(r>>>3)]<<8)>>>(7&r)&(1<<n)-1},f.F._bitsF=function(e,r,n){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16)>>>(7&r)&(1<<n)-1},f.F._get17=function(e,r){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16)>>>(7&r)},f.F._get25=function(e,r){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16|e[3+(r>>>3)]<<24)>>>(7&r)},f.F.U=(i=Uint16Array,_=Uint32Array,{next_code:new i(16),bl_count:new i(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new i(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new _(32),flmap:new i(512),fltree:[],fdmap:new i(32),fdtree:[],lmap:new i(32768),ltree:[],ttree:[],dmap:new i(32768),dtree:[],imap:new i(512),itree:[],rev15:new i(32768),lhst:new _(286),dhst:new _(30),ihst:new _(19),lits:new _(15e3),strt:new i(65536),prev:new i(32768)}),function(){for(var e=f.F.U,r=0;r<32768;r++){var n=r;n=(4278255360&(n=(4042322160&(n=(3435973836&(n=(2863311530&n)>>>1|(1431655765&n)<<1))>>>2|(858993459&n)<<2))>>>4|(252645135&n)<<4))>>>8|(16711935&n)<<8,e.rev15[r]=(n>>>16|n<<16)>>>17}function i(e,r,n){for(;0!=r--;)e.push(0,n)}for(r=0;r<32;r++)e.ldef[r]=e.of0[r]<<3|e.exb[r],e.ddef[r]=e.df0[r]<<4|e.dxb[r];i(e.fltree,144,8),i(e.fltree,112,9),i(e.fltree,24,7),i(e.fltree,8,8),f.F.makeCodes(e.fltree,9),f.F.codes2map(e.fltree,9,e.flmap),f.F.revCodes(e.fltree,9),i(e.fdtree,32,5),f.F.makeCodes(e.fdtree,5),f.F.codes2map(e.fdtree,5,e.fdmap),f.F.revCodes(e.fdtree,5),i(e.itree,19,0),i(e.ltree,286,0),i(e.dtree,30,0),i(e.ttree,320,0)}();var a=(l={__proto__:null,default:$},(o=[$]).forEach(function(e){e&&"string"!=typeof e&&!Array.isArray(e)&&Object.keys(e).forEach(function(r){if("default"!==r&&!(r in l)){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(l,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})}),Object.freeze(l));let s=function(){var e={nextZero(e,r){for(;0!=e[r];)r++;return r},readUshort:(e,r)=>e[r]<<8|e[r+1],writeUshort(e,r,n){e[r]=n>>8&255,e[r+1]=255&n},readUint:(e,r)=>16777216*e[r]+(e[r+1]<<16|e[r+2]<<8|e[r+3]),writeUint(e,r,n){e[r]=n>>24&255,e[r+1]=n>>16&255,e[r+2]=n>>8&255,e[r+3]=255&n},readASCII(e,r,n){let i="";for(let _=0;_<n;_++)i+=String.fromCharCode(e[r+_]);return i},writeASCII(e,r,n){for(let i=0;i<n.length;i++)e[r+i]=n.charCodeAt(i)},readBytes(e,r,n){let i=[];for(let _=0;_<n;_++)i.push(e[r+_]);return i},pad:e=>e.length<2?`0${e}`:e,readUTF8(r,n,i){let _,f="";for(let l=0;l<i;l++)f+=`%${e.pad(r[n+l].toString(16))}`;try{_=decodeURIComponent(f)}catch(o){return e.readASCII(r,n,i)}return _}};function r(r,n,i,_){let l=n*i,o=f(_),$=Math.ceil(n*o/8),a=new Uint8Array(4*l),s=new Uint32Array(a.buffer),{ctype:u}=_,{depth:c}=_,h=e.readUshort;if(6==u){let d=l<<2;if(8==c)for(var A=0;A<d;A+=4)a[A]=r[A],a[A+1]=r[A+1],a[A+2]=r[A+2],a[A+3]=r[A+3];if(16==c)for(A=0;A<d;A++)a[A]=r[A<<1]}else if(2==u){let g=_.tabs.tRNS;if(null==g){if(8==c)for(A=0;A<l;A++){var p=3*A;s[A]=-16777216|r[p+2]<<16|r[p+1]<<8|r[p]}if(16==c)for(A=0;A<l;A++)p=6*A,s[A]=-16777216|r[p+4]<<16|r[p+2]<<8|r[p]}else{var w=g[0];let v=g[1],b=g[2];if(8==c)for(A=0;A<l;A++){var m=A<<2;p=3*A,s[A]=-16777216|r[p+2]<<16|r[p+1]<<8|r[p],r[p]==w&&r[p+1]==v&&r[p+2]==b&&(a[m+3]=0)}if(16==c)for(A=0;A<l;A++)m=A<<2,p=6*A,s[A]=-16777216|r[p+4]<<16|r[p+2]<<8|r[p],h(r,p)==w&&h(r,p+2)==v&&h(r,p+4)==b&&(a[m+3]=0)}}else if(3==u){let E=_.tabs.PLTE,y=_.tabs.tRNS,F=y?y.length:0;if(1==c)for(var B,Q=0;Q<i;Q++){var I=Q*$,C=Q*n;for(A=0;A<n;A++){m=C+A<<2;var U=3*(B=r[I+(A>>3)]>>7-((7&A)<<0)&1);a[m]=E[U],a[m+1]=E[U+1],a[m+2]=E[U+2],a[m+3]=B<F?y[B]:255}}if(2==c)for(Q=0;Q<i;Q++)for(I=Q*$,C=Q*n,A=0;A<n;A++)m=C+A<<2,U=3*(B=r[I+(A>>2)]>>6-((3&A)<<1)&3),a[m]=E[U],a[m+1]=E[U+1],a[m+2]=E[U+2],a[m+3]=B<F?y[B]:255;if(4==c)for(Q=0;Q<i;Q++)for(I=Q*$,C=Q*n,A=0;A<n;A++)m=C+A<<2,U=3*(B=r[I+(A>>1)]>>4-((1&A)<<2)&15),a[m]=E[U],a[m+1]=E[U+1],a[m+2]=E[U+2],a[m+3]=B<F?y[B]:255;if(8==c)for(A=0;A<l;A++)m=A<<2,U=3*(B=r[A]),a[m]=E[U],a[m+1]=E[U+1],a[m+2]=E[U+2],a[m+3]=B<F?y[B]:255}else if(4==u){if(8==c)for(A=0;A<l;A++){m=A<<2;var x,T=r[x=A<<1];a[m]=T,a[m+1]=T,a[m+2]=T,a[m+3]=r[x+1]}if(16==c)for(A=0;A<l;A++)m=A<<2,T=r[x=A<<2],a[m]=T,a[m+1]=T,a[m+2]=T,a[m+3]=r[x+2]}else if(0==u)for(w=_.tabs.tRNS?_.tabs.tRNS:-1,Q=0;Q<i;Q++){let R=Q*$,S=Q*n;if(1==c)for(var H=0;H<n;H++){var M=(T=255*(r[R+(H>>>3)]>>>7-(7&H)&1))==255*w?0:255;s[S+H]=M<<24|T<<16|T<<8|T}else if(2==c)for(H=0;H<n;H++)M=(T=85*(r[R+(H>>>2)]>>>6-((3&H)<<1)&3))==85*w?0:255,s[S+H]=M<<24|T<<16|T<<8|T;else if(4==c)for(H=0;H<n;H++)M=(T=17*(r[R+(H>>>1)]>>>4-((1&H)<<2)&15))==17*w?0:255,s[S+H]=M<<24|T<<16|T<<8|T;else if(8==c)for(H=0;H<n;H++)M=(T=r[R+H])==w?0:255,s[S+H]=M<<24|T<<16|T<<8|T;else if(16==c)for(H=0;H<n;H++)T=r[R+(H<<1)],M=h(r,R+(H<<1))==w?0:255,s[S+H]=M<<24|T<<16|T<<8|T}return a}function n(e,r,n,o){let $=f(e),a=new Uint8Array((Math.ceil(n*$/8)+1+e.interlace)*o);return r=e.tabs.CgBI?_(r,a):i(r,a),0==e.interlace?r=l(r,e,0,n,o):1==e.interlace&&(r=function e(r,n){let i=n.width,_=n.height,o=f(n),$=o>>3,a=Math.ceil(i*o/8),s=new Uint8Array(_*a),u=0,c=[0,0,4,0,2,0,1],h=[0,4,0,2,0,1,0],d=[8,8,8,4,4,2,2],A=[8,8,4,4,2,2,1],g=0;for(;g<7;){let p=d[g],w=A[g],v=0,b=0,m=c[g];for(;m<_;)m+=p,b++;let E=h[g];for(;E<i;)E+=w,v++;let y=Math.ceil(v*o/8);l(r,n,u,v,b);let F=0,B=c[g];for(;B<_;){let Q=h[g],I=u+F*y<<3;for(;Q<i;){var C;if(1==o&&(C=(C=r[I>>3])>>7-(7&I)&1,s[B*a+(Q>>3)]|=C<<7-((7&Q)<<0)),2==o&&(C=(C=r[I>>3])>>6-(7&I)&3,s[B*a+(Q>>2)]|=C<<6-((3&Q)<<1)),4==o&&(C=(C=r[I>>3])>>4-(7&I)&15,s[B*a+(Q>>1)]|=C<<4-((1&Q)<<2)),o>=8){let U=B*a+Q*$;for(let x=0;x<$;x++)s[U+x]=r[(I>>3)+x]}I+=o,Q+=w}F++,B+=p}v*b!=0&&(u+=b*(1+y)),g+=1}return s}(r,e)),r}function i(e,r){return _(new Uint8Array(e.buffer,2,e.length-6),r)}var _=function(){let e={H:{}};return e.H.N=function(r,n){let i=Uint8Array,_,f,l=0,o=0,$=0,a=0,s=0,u=0,c=0,h=0,d=0;if(3==r[0]&&0==r[1])return n||new i(0);let A=e.H,g=A.b,p=A.e,w=A.R,v=A.n,b=A.A,m=A.Z,E=A.m,y=null==n;for(y&&(n=new i(r.length>>>2<<5));0==l;)if(l=g(r,d,1),o=g(r,d+1,2),d+=3,0!=o){if(y&&(n=e.H.W(n,h+131072)),1==o&&(_=E.J,f=E.h,u=511,c=31),2==o){$=p(r,d,5)+257,a=p(r,d+5,5)+1,s=p(r,d+10,4)+4,d+=14;let F=1;for(var B=0;B<38;B+=2)E.Q[B]=0,E.Q[B+1]=0;for(B=0;B<s;B++){let Q=p(r,d+3*B,3);E.Q[1+(E.X[B]<<1)]=Q,Q>F&&(F=Q)}d+=3*s,v(E.Q,F),b(E.Q,F,E.u),_=E.w,f=E.d,d=w(E.u,(1<<F)-1,$+a,r,d,E.v);let I=A.V(E.v,0,$,E.C);u=(1<<I)-1;let C=A.V(E.v,$,a,E.D);c=(1<<C)-1,v(E.C,I),b(E.C,I,_),v(E.D,C),b(E.D,C,f)}for(;;){let U=_[m(r,d)&u];d+=15&U;let x=U>>>4;if(x>>>8==0)n[h++]=x;else{if(256==x)break;{let T=h+x-254;if(x>264){let R=E.q[x-257];T=h+(R>>>3)+p(r,d,7&R),d+=7&R}let S=f[m(r,d)&c];d+=15&S;let H=S>>>4,M=E.c[H],O=(M>>>4)+g(r,d,15&M);for(d+=15&M;h<T;)n[h]=n[h++-O],n[h]=n[h++-O],n[h]=n[h++-O],n[h]=n[h++-O];h=T}}}}else{0!=(7&d)&&(d+=8-(7&d));let L=4+(d>>>3),k=r[L-4]|r[L-3]<<8;y&&(n=e.H.W(n,h+k)),n.set(new i(r.buffer,r.byteOffset+L,k),h),d=L+k<<3,h+=k}return n.length==h?n:n.slice(0,h)},e.H.W=function(e,r){let n=e.length;if(r<=n)return e;let i=new Uint8Array(n<<1);return i.set(e,0),i},e.H.R=function(r,n,i,_,f,l){let o=e.H.e,$=e.H.Z,a=0;for(;a<i;){let s=r[$(_,f)&n];f+=15&s;let u=s>>>4;if(u<=15)l[a]=u,a++;else{let c=0,h=0;16==u?(h=3+o(_,f,2),f+=2,c=l[a-1]):17==u?(h=3+o(_,f,3),f+=3):18==u&&(h=11+o(_,f,7),f+=7);let d=a+h;for(;a<d;)l[a]=c,a++}}return f},e.H.V=function(e,r,n,i){let _=0,f=0,l=i.length>>>1;for(;f<n;){let o=e[f+r];i[f<<1]=0,i[1+(f<<1)]=o,o>_&&(_=o),f++}for(;f<l;)i[f<<1]=0,i[1+(f<<1)]=0,f++;return _},e.H.n=function(r,n){let i=e.H.m,_=r.length,f,l,o,$,a=i.j;for(var s=0;s<=n;s++)a[s]=0;for(s=1;s<_;s+=2)a[r[s]]++;let u=i.K;for(f=0,a[0]=0,l=1;l<=n;l++)f=f+a[l-1]<<1,u[l]=f;for(o=0;o<_;o+=2)0!=($=r[o+1])&&(r[o]=u[$],u[$]++)},e.H.A=function(r,n,i){let _=r.length,f=e.H.m.r;for(let l=0;l<_;l+=2)if(0!=r[l+1]){let o=l>>1,$=r[l+1],a=o<<4|$,s=n-$,u=r[l]<<s,c=u+(1<<s);for(;u!=c;)i[f[u]>>>15-n]=a,u++}},e.H.l=function(r,n){let i=e.H.m.r,_=15-n;for(let f=0;f<r.length;f+=2){let l=r[f]<<n-r[f+1];r[f]=i[l]>>>_}},e.H.M=function(e,r,n){n<<=7&r;let i=r>>>3;e[i]|=n,e[i+1]|=n>>>8},e.H.I=function(e,r,n){n<<=7&r;let i=r>>>3;e[i]|=n,e[i+1]|=n>>>8,e[i+2]|=n>>>16},e.H.e=function(e,r,n){return(e[r>>>3]|e[1+(r>>>3)]<<8)>>>(7&r)&(1<<n)-1},e.H.b=function(e,r,n){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16)>>>(7&r)&(1<<n)-1},e.H.Z=function(e,r){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16)>>>(7&r)},e.H.i=function(e,r){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16|e[3+(r>>>3)]<<24)>>>(7&r)},e.H.m=function(){let e=Uint16Array,r=Uint32Array;return{K:new e(16),j:new e(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new e(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new r(32),J:new e(512),_:[],h:new e(32),$:[],w:new e(32768),C:[],v:[],d:new e(32768),D:[],u:new e(512),Q:[],r:new e(32768),s:new r(286),Y:new r(30),a:new r(19),t:new r(15e3),k:new e(65536),g:new e(32768)}}(),function(){let r=e.H.m;for(var n=0;n<32768;n++){let i=n;i=(4278255360&(i=(4042322160&(i=(3435973836&(i=(2863311530&i)>>>1|(1431655765&i)<<1))>>>2|(858993459&i)<<2))>>>4|(252645135&i)<<4))>>>8|(16711935&i)<<8,r.r[n]=(i>>>16|i<<16)>>>17}function _(e,r,n){for(;0!=r--;)e.push(0,n)}for(n=0;n<32;n++)r.q[n]=r.S[n]<<3|r.T[n],r.c[n]=r.p[n]<<4|r.z[n];_(r._,144,8),_(r._,112,9),_(r._,24,7),_(r._,8,8),e.H.n(r._,9),e.H.A(r._,9,r.J),e.H.l(r._,9),_(r.$,32,5),e.H.n(r.$,5),e.H.A(r.$,5,r.h),e.H.l(r.$,5),_(r.Q,19,0),_(r.C,286,0),_(r.D,30,0),_(r.v,320,0)}(),e.H.N}();function f(e){return[1,null,3,1,2,null,4][e.ctype]*e.depth}function l(e,r,n,i,_){let l=f(r),$=Math.ceil(i*l/8),a,s;l=Math.ceil(l/8);let u=e[n],c=0;if(u>1&&(e[n]=[0,0,1][u-2]),3==u)for(c=l;c<$;c++)e[c+1]=e[c+1]+(e[c+1-l]>>>1)&255;for(let h=0;h<_;h++)if(u=e[(s=(a=n+h*$)+h+1)-1],c=0,0==u)for(;c<$;c++)e[a+c]=e[s+c];else if(1==u){for(;c<l;c++)e[a+c]=e[s+c];for(;c<$;c++)e[a+c]=e[s+c]+e[a+c-l]}else if(2==u)for(;c<$;c++)e[a+c]=e[s+c]+e[a+c-$];else if(3==u){for(;c<l;c++)e[a+c]=e[s+c]+(e[a+c-$]>>>1);for(;c<$;c++)e[a+c]=e[s+c]+(e[a+c-$]+e[a+c-l]>>>1)}else{for(;c<l;c++)e[a+c]=e[s+c]+o(0,e[a+c-$],0);for(;c<$;c++)e[a+c]=e[s+c]+o(e[a+c-l],e[a+c-$],e[a+c-l-$])}return e}function o(e,r,n){let i=e+r-n,_=i-e,f=i-r,l=i-n;return _*_<=f*f&&_*_<=l*l?e:f*f<=l*l?r:n}function $(r,n,i){i.width=e.readUint(r,n),n+=4,i.height=e.readUint(r,n),n+=4,i.depth=r[n],n++,i.ctype=r[n],n++,i.compress=r[n],n++,i.filter=r[n],n++,i.interlace=r[n],n++}function a(e,r,n,i,_,f,l,o,$){let a=Math.min(r,_),s=Math.min(n,f),u=0,c=0;for(let h=0;h<s;h++)for(let d=0;d<a;d++)if(l>=0&&o>=0?(u=h*r+d<<2,c=(o+h)*_+l+d<<2):(u=(-o+h)*r-l+d<<2,c=h*_+d<<2),0==$)i[c]=e[u],i[c+1]=e[u+1],i[c+2]=e[u+2],i[c+3]=e[u+3];else if(1==$){var A=e[u+3]*(1/255),g=e[u]*A,p=e[u+1]*A,w=e[u+2]*A,v=i[c+3]*(1/255),b=i[c]*v,m=i[c+1]*v,E=i[c+2]*v;let y=1-A,F=A+v*y,B=0==F?0:1/F;i[c+3]=255*F,i[c+0]=(g+b*y)*B,i[c+1]=(p+m*y)*B,i[c+2]=(w+E*y)*B}else if(2==$)A=e[u+3],g=e[u],p=e[u+1],w=e[u+2],v=i[c+3],b=i[c],m=i[c+1],E=i[c+2],A==v&&g==b&&p==m&&w==E?(i[c]=0,i[c+1]=0,i[c+2]=0,i[c+3]=0):(i[c]=g,i[c+1]=p,i[c+2]=w,i[c+3]=A);else if(3==$){if(A=e[u+3],g=e[u],p=e[u+1],w=e[u+2],v=i[c+3],b=i[c],m=i[c+1],E=i[c+2],A==v&&g==b&&p==m&&w==E)continue;if(A<220&&v>20)return!1}return!0}return{decode:function r(f){let l=new Uint8Array(f),o=8,a=e,s=a.readUshort,u=a.readUint,c={tabs:{},frames:[]},h=new Uint8Array(l.length),d,A=0,g=0,p=[137,80,78,71,13,10,26,10];for(var w,v=0;v<8;v++)if(l[v]!=p[v])throw"The input is not a PNG file!";for(;o<l.length;){let b=a.readUint(l,o);o+=4;let m=a.readASCII(l,o,4);if(o+=4,"IHDR"==m)$(l,o,c);else if("iCCP"==m){for(var E,y=o;0!=l[y];)y++;a.readASCII(l,o,y-o),l[y+1];let F=l.slice(y+2,o+b),B=null;try{B=i(F)}catch(Q){B=_(F)}c.tabs[m]=B}else if("CgBI"==m)c.tabs[m]=l.slice(o,o+4);else if("IDAT"==m){for(v=0;v<b;v++)h[A+v]=l[o+v];A+=b}else if("acTL"==m)c.tabs[m]={num_frames:u(l,o),num_plays:u(l,o+4)},d=new Uint8Array(l.length);else if("fcTL"==m){0!=g&&((w=c.frames[c.frames.length-1]).data=n(c,d.slice(0,g),w.rect.width,w.rect.height),g=0);let I={x:u(l,o+12),y:u(l,o+16),width:u(l,o+4),height:u(l,o+8)},C=s(l,o+22);C=s(l,o+20)/(0==C?100:C);let U={rect:I,delay:Math.round(1e3*C),dispose:l[o+24],blend:l[o+25]};c.frames.push(U)}else if("fdAT"==m){for(v=0;v<b-4;v++)d[g+v]=l[o+v+4];g+=b-4}else if("pHYs"==m)c.tabs[m]=[a.readUint(l,o),a.readUint(l,o+4),l[o+8]];else if("cHRM"==m)for(v=0,c.tabs[m]=[];v<8;v++)c.tabs[m].push(a.readUint(l,o+4*v));else if("tEXt"==m||"zTXt"==m){null==c.tabs[m]&&(c.tabs[m]={});var x=a.nextZero(l,o),T=a.readASCII(l,o,x-o),R=o+b-x-1;if("tEXt"==m)E=a.readASCII(l,x+1,R);else{var S=i(l.slice(x+2,x+2+R));E=a.readUTF8(S,0,S.length)}c.tabs[m][T]=E}else if("iTXt"==m){null==c.tabs[m]&&(c.tabs[m]={}),x=0,y=o,x=a.nextZero(l,y),T=a.readASCII(l,y,x-y);let H=l[y=x+1];l[y+1],y+=2,x=a.nextZero(l,y),a.readASCII(l,y,x-y),y=x+1,x=a.nextZero(l,y),a.readUTF8(l,y,x-y),R=b-((y=x+1)-o),0==H?E=a.readUTF8(l,y,R):(S=i(l.slice(y,y+R)),E=a.readUTF8(S,0,S.length)),c.tabs[m][T]=E}else if("PLTE"==m)c.tabs[m]=a.readBytes(l,o,b);else if("hIST"==m){let M=c.tabs.PLTE.length/3;for(v=0,c.tabs[m]=[];v<M;v++)c.tabs[m].push(s(l,o+2*v))}else if("tRNS"==m)3==c.ctype?c.tabs[m]=a.readBytes(l,o,b):0==c.ctype?c.tabs[m]=s(l,o):2==c.ctype&&(c.tabs[m]=[s(l,o),s(l,o+2),s(l,o+4)]);else if("gAMA"==m)c.tabs[m]=a.readUint(l,o)/1e5;else if("sRGB"==m)c.tabs[m]=l[o];else if("bKGD"==m)0==c.ctype||4==c.ctype?c.tabs[m]=[s(l,o)]:2==c.ctype||6==c.ctype?c.tabs[m]=[s(l,o),s(l,o+2),s(l,o+4)]:3==c.ctype&&(c.tabs[m]=l[o]);else if("IEND"==m)break;o+=b,a.readUint(l,o),o+=4}return 0!=g&&((w=c.frames[c.frames.length-1]).data=n(c,d.slice(0,g),w.rect.width,w.rect.height)),c.data=n(c,h,c.width,c.height),delete c.compress,delete c.interlace,delete c.filter,c},toRGBA8:function e(n){let i=n.width,_=n.height;if(null==n.tabs.acTL)return[r(n.data,i,_,n).buffer];let f=[];null==n.frames[0].data&&(n.frames[0].data=n.data);let l=i*_*4,o=new Uint8Array(l),$=new Uint8Array(l),s=new Uint8Array(l);for(let u=0;u<n.frames.length;u++){let c=n.frames[u],h=c.rect.x,d=c.rect.y,A=c.rect.width,g=c.rect.height,p=r(c.data,A,g,n);if(0!=u)for(var w=0;w<l;w++)s[w]=o[w];if(0==c.blend?a(p,A,g,o,i,_,h,d,0):1==c.blend&&a(p,A,g,o,i,_,h,d,1),f.push(o.buffer.slice(0)),0==c.dispose);else if(1==c.dispose)a($,A,g,o,i,_,h,d,0);else if(2==c.dispose)for(w=0;w<l;w++)o[w]=s[w]}return f},_paeth:o,_copyTile:a,_bin:e}}();!function(){let{_copyTile:e}=s,{_bin:r}=s,n=s._paeth;var i={table:function(){let e=new Uint32Array(256);for(let r=0;r<256;r++){let n=r;for(let i=0;i<8;i++)1&n?n=3988292384^n>>>1:n>>>=1;e[r]=n}return e}(),update(e,r,n,_){for(let f=0;f<_;f++)e=i.table[255&(e^r[n+f])]^e>>>8;return e},crc:(e,r,n)=>4294967295^i.update(4294967295,e,r,n)};function _(e,r,n,i){r[n]+=e[0]*i>>4,r[n+1]+=e[1]*i>>4,r[n+2]+=e[2]*i>>4,r[n+3]+=e[3]*i>>4}function f(e){return Math.max(0,Math.min(255,e))}function l(e,r){let n=e[0]-r[0],i=e[1]-r[1],_=e[2]-r[2],f=e[3]-r[3];return n*n+i*i+_*_+f*f}function o(e,r,n,i,o,$,a){null==a&&(a=1);let s=i.length,u=[];for(var c,h=0;h<s;h++){let d=i[h];u.push([d>>>0&255,d>>>8&255,d>>>16&255,d>>>24&255])}for(h=0;h<s;h++){let A=4294967295;for(var g=0,p=0;p<s;p++){var w=l(u[h],u[p]);p!=h&&w<A&&(A=w,g=p)}}let v=new Uint32Array(o.buffer),b=new Int16Array(r*n*4),m=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(h=0;h<m.length;h++)m[h]=255*((m[h]+.5)/16-.5);for(let E=0;E<n;E++)for(let y=0;y<r;y++){h=4*(E*r+y),2!=a?c=[f(e[h]+b[h]),f(e[h+1]+b[h+1]),f(e[h+2]+b[h+2]),f(e[h+3]+b[h+3])]:(w=m[4*(3&E)+(3&y)],c=[f(e[h]+w),f(e[h+1]+w),f(e[h+2]+w),f(e[h+3]+w)]),g=0;let F=16777215;for(p=0;p<s;p++){let B=l(c,u[p]);B<F&&(F=B,g=p)}let Q=u[g],I=[c[0]-Q[0],c[1]-Q[1],c[2]-Q[2],c[3]-Q[3]];1==a&&(y!=r-1&&_(I,b,h+4,7),E!=n-1&&(0!=y&&_(I,b,h+4*r-4,3),_(I,b,h+4*r,5),y!=r-1&&_(I,b,h+4*r+4,1))),$[h>>2]=g,v[h>>2]=i[g]}}function $(e,n,_,f,l){null==l&&(l={});let{crc:o}=i,$=r.writeUint,a=r.writeUshort,s=r.writeASCII,u=8,c=e.frames.length>1,h,d=!1,A=33+(c?20:0);if(null!=l.sRGB&&(A+=13),null!=l.pHYs&&(A+=21),null!=l.iCCP&&(A+=21+(h=pako.deflate(l.iCCP)).length+4),3==e.ctype){for(var g=e.plte.length,p=0;p<g;p++)e.plte[p]>>>24!=255&&(d=!0);A+=8+3*g+4+(d?8+1*g+4:0)}for(var w=0;w<e.frames.length;w++)c&&(A+=38),A+=(C=e.frames[w]).cimg.length+12,0!=w&&(A+=4);A+=12;let v=new Uint8Array(A),b=[137,80,78,71,13,10,26,10];for(p=0;p<8;p++)v[p]=b[p];if($(v,u,13),s(v,u+=4,"IHDR"),$(v,u+=4,n),$(v,u+=4,_),v[u+=4]=e.depth,v[++u]=e.ctype,v[++u]=0,v[++u]=0,v[++u]=0,$(v,++u,o(v,u-17,17)),u+=4,null!=l.sRGB&&($(v,u,1),s(v,u+=4,"sRGB"),v[u+=4]=l.sRGB,$(v,++u,o(v,u-5,5)),u+=4),null!=l.iCCP){let m=13+h.length;$(v,u,m),s(v,u+=4,"iCCP"),s(v,u+=4,"ICC profile"),u+=11,u+=2,v.set(h,u),$(v,u+=h.length,o(v,u-(m+4),m+4)),u+=4}if(null!=l.pHYs&&($(v,u,9),s(v,u+=4,"pHYs"),$(v,u+=4,l.pHYs[0]),$(v,u+=4,l.pHYs[1]),v[u+=4]=l.pHYs[2],$(v,++u,o(v,u-13,13)),u+=4),c&&($(v,u,8),s(v,u+=4,"acTL"),$(v,u+=4,e.frames.length),$(v,u+=4,null!=l.loop?l.loop:0),$(v,u+=4,o(v,u-12,12)),u+=4),3==e.ctype){for($(v,u,3*(g=e.plte.length)),s(v,u+=4,"PLTE"),u+=4,p=0;p<g;p++){let E=3*p,y=e.plte[p],F=255&y,B=y>>>8&255,Q=y>>>16&255;v[u+E+0]=F,v[u+E+1]=B,v[u+E+2]=Q}if($(v,u+=3*g,o(v,u-3*g-4,3*g+4)),u+=4,d){for($(v,u,g),s(v,u+=4,"tRNS"),u+=4,p=0;p<g;p++)v[u+p]=e.plte[p]>>>24&255;$(v,u+=g,o(v,u-g-4,g+4)),u+=4}}let I=0;for(w=0;w<e.frames.length;w++){var C=e.frames[w];c&&($(v,u,26),s(v,u+=4,"fcTL"),$(v,u+=4,I++),$(v,u+=4,C.rect.width),$(v,u+=4,C.rect.height),$(v,u+=4,C.rect.x),$(v,u+=4,C.rect.y),a(v,u+=4,f[w]),a(v,u+=2,1e3),v[u+=2]=C.dispose,v[++u]=C.blend,$(v,++u,o(v,u-30,30)),u+=4);let U=C.cimg;$(v,u,(g=U.length)+(0==w?0:4)),u+=4;let x=u;s(v,u,0==w?"IDAT":"fdAT"),u+=4,0!=w&&($(v,u,I++),u+=4),v.set(U,u),$(v,u+=g,o(v,x,u-x)),u+=4}return $(v,u,0),s(v,u+=4,"IEND"),$(v,u+=4,o(v,u-4,4)),u+=4,v.buffer}function u(e,r,n){for(let i=0;i<e.frames.length;i++){let _=e.frames[i];_.rect.width;let f=_.rect.height,l=new Uint8Array(f*_.bpl+f);_.cimg=A(_.img,f,_.bpp,_.bpl,l,r,n)}}function c(r,n,i,_,f){let l=f[0],$=f[1],a=f[2],s=f[3],u=f[4],c=f[5],A=6,g=8,w=255;for(var v=0;v<r.length;v++){let b=new Uint8Array(r[v]);for(var m=b.length,E=0;E<m;E+=4)w&=b[E+3]}let y=255!=w,F=function r(n,i,_,f,l,o){let $=[];for(var a,s=0;s<n.length;s++){let u=new Uint8Array(n[s]),c=new Uint32Array(u.buffer),A=0,g=0,p=i,w=_,v=f?1:0;if(0!=s){let b=o||f||1==s||0!=$[s-2].dispose?1:2,m=0,E=1e9;for(let y=0;y<b;y++){var F,B=new Uint8Array(n[s-1-y]);let Q=new Uint32Array(n[s-1-y]),I=i,C=_,U=-1,x=-1;for(let T=0;T<_;T++)for(let R=0;R<i;R++)c[P=T*i+R]!=Q[P]&&(R<I&&(I=R),R>U&&(U=R),T<C&&(C=T),T>x&&(x=T));-1==U&&(I=C=U=x=0),l&&(1==(1&I)&&I--,1==(1&C)&&C--);let S=(U-I+1)*(x-C+1);S<E&&(E=S,m=y,A=I,g=C,p=U-I+1,w=x-C+1)}B=new Uint8Array(n[s-1-m]),1==m&&($[s-1].dispose=2),F=new Uint8Array(p*w*4),e(B,i,_,F,p,w,-A,-g,0),1==(v=e(u,i,_,F,p,w,-A,-g,3)?1:0)?d(u,i,_,F,{x:A,y:g,width:p,height:w}):e(u,i,_,F,p,w,-A,-g,0)}else F=u.slice(0);$.push({rect:{x:A,y:g,width:p,height:w},img:F,blend:v,dispose:0})}if(f)for(s=0;s<$.length;s++){if(1==(a=$[s]).blend)continue;let H=a.rect,M=$[s-1].rect,O=Math.min(H.x,M.x),L=Math.min(H.y,M.y),k={x:O,y:L,width:Math.max(H.x+H.width,M.x+M.width)-O,height:Math.max(H.y+H.height,M.y+M.height)-L};$[s-1].dispose=1,s-1!=0&&h(n,i,_,$,s-1,k,l),h(n,i,_,$,s,k,l)}let D=0;if(1!=n.length)for(var P=0;P<$.length;P++)D+=(a=$[P]).rect.width*a.rect.height;return $}(r,n,i,l,$,a),B={},Q=[],I=[];if(0!=_){let C=[];for(E=0;E<F.length;E++)C.push(F[E].img.buffer);let U=function e(r){let n=0;for(var i=0;i<r.length;i++)n+=r[i].byteLength;let _=new Uint8Array(n),f=0;for(i=0;i<r.length;i++){let l=new Uint8Array(r[i]),o=l.length;for(let $=0;$<o;$+=4){let a=l[$],s=l[$+1],u=l[$+2],c=l[$+3];0==c&&(a=s=u=0),_[f+$]=a,_[f+$+1]=s,_[f+$+2]=u,_[f+$+3]=c}f+=o}return _.buffer}(C),x=p(U,_);for(E=0;E<x.plte.length;E++)Q.push(x.plte[E].est.rgba);let T=0;for(E=0;E<F.length;E++){let R=(M=F[E]).img.length;var S=new Uint8Array(x.inds.buffer,T>>2,R>>2);I.push(S);let H=new Uint8Array(x.abuf,T,R);c&&o(M.img,M.rect.width,M.rect.height,Q,H,S),M.img.set(H),T+=R}}else for(v=0;v<F.length;v++){var M=F[v];let O=new Uint32Array(M.img.buffer);var L=M.rect.width;for(m=O.length,S=new Uint8Array(m),I.push(S),E=0;E<m;E++){let k=O[E];if(0!=E&&k==O[E-1])S[E]=S[E-1];else if(E>L&&k==O[E-L])S[E]=S[E-L];else{let D=B[k];if(null==D&&(B[k]=D=Q.length,Q.push(k),Q.length>=300))break;S[E]=D}}}let P=Q.length;for(P<=256&&0==u&&(g=Math.max(g=P<=2?1:P<=4?2:P<=16?4:8,s)),v=0;v<F.length;v++){(M=F[v]).rect.x,M.rect.y,L=M.rect.width;let z=M.rect.height,N=M.img;new Uint32Array(N.buffer);let q=4*L,K=4;if(P<=256&&0==u){q=Math.ceil(g*L/8);var j=new Uint8Array(q*z);let W=I[v];for(let X=0;X<z;X++){E=X*q;let Y=X*L;if(8==g)for(var Z=0;Z<L;Z++)j[E+Z]=W[Y+Z];else if(4==g)for(Z=0;Z<L;Z++)j[E+(Z>>1)]|=W[Y+Z]<<4-4*(1&Z);else if(2==g)for(Z=0;Z<L;Z++)j[E+(Z>>2)]|=W[Y+Z]<<6-2*(3&Z);else if(1==g)for(Z=0;Z<L;Z++)j[E+(Z>>3)]|=W[Y+Z]<<7-1*(7&Z)}N=j,A=3,K=1}else if(0==y&&1==F.length){j=new Uint8Array(L*z*3);let G=L*z;for(E=0;E<G;E++){let V=3*E,J=4*E;j[V]=N[J],j[V+1]=N[J+1],j[V+2]=N[J+2]}N=j,A=2,K=3,q=3*L}M.img=N,M.bpl=q,M.bpp=K}return{ctype:A,depth:g,plte:Q,frames:F}}function h(r,n,i,_,f,l,o){let $=Uint8Array,a=Uint32Array,s=new $(r[f-1]),u=new a(r[f-1]),c=f+1<r.length?new $(r[f+1]):null,h=new $(r[f]),A=new a(h.buffer),g=n,p=i,w=-1,v=-1;for(let b=0;b<l.height;b++)for(let m=0;m<l.width;m++){let E=l.x+m,y=l.y+b,F=y*n+E,B=A[F];0==B||0==_[f-1].dispose&&u[F]==B&&(null==c||0!=c[4*F+3])||(E<g&&(g=E),E>w&&(w=E),y<p&&(p=y),y>v&&(v=y))}-1==w&&(g=p=w=v=0),o&&(1==(1&g)&&g--,1==(1&p)&&p--),l={x:g,y:p,width:w-g+1,height:v-p+1};let Q=_[f];Q.rect=l,Q.blend=1,Q.img=new Uint8Array(l.width*l.height*4),0==_[f-1].dispose?(e(s,n,i,Q.img,l.width,l.height,-l.x,-l.y,0),d(h,n,i,Q.img,l)):e(h,n,i,Q.img,l.width,l.height,-l.x,-l.y,0)}function d(r,n,i,_,f){e(r,n,i,_,f.width,f.height,-f.x,-f.y,2)}function A(e,r,n,i,_,f,l){let o=[],$,s=[0,1,2,3,4];-1!=f?s=[f]:(r*i>5e5||1==n)&&(s=[0]),l&&($={level:0});let u=a;for(var c=0;c<s.length;c++){for(let h=0;h<r;h++)g(_,e,h,i,n,s[c]);o.push(u.deflate(_,$))}let d,A=1e9;for(c=0;c<o.length;c++)o[c].length<A&&(d=c,A=o[c].length);return o[d]}function g(e,r,i,_,f,l){let o=i*_,$=o+i;if(e[$]=l,$++,0==l){if(_<500)for(var a=0;a<_;a++)e[$+a]=r[o+a];else e.set(new Uint8Array(r.buffer,o,_),$)}else if(1==l){for(a=0;a<f;a++)e[$+a]=r[o+a];for(a=f;a<_;a++)e[$+a]=r[o+a]-r[o+a-f]+256&255}else if(0==i){for(a=0;a<f;a++)e[$+a]=r[o+a];if(2==l)for(a=f;a<_;a++)e[$+a]=r[o+a];if(3==l)for(a=f;a<_;a++)e[$+a]=r[o+a]-(r[o+a-f]>>1)+256&255;if(4==l)for(a=f;a<_;a++)e[$+a]=r[o+a]-n(r[o+a-f],0,0)+256&255}else{if(2==l)for(a=0;a<_;a++)e[$+a]=r[o+a]+256-r[o+a-_]&255;if(3==l){for(a=0;a<f;a++)e[$+a]=r[o+a]+256-(r[o+a-_]>>1)&255;for(a=f;a<_;a++)e[$+a]=r[o+a]+256-(r[o+a-_]+r[o+a-f]>>1)&255}if(4==l){for(a=0;a<f;a++)e[$+a]=r[o+a]+256-n(0,r[o+a-_],0)&255;for(a=f;a<_;a++)e[$+a]=r[o+a]+256-n(r[o+a-f],r[o+a-_],r[o+a-f-_])&255}}}function p(e,r){let n=new Uint8Array(e),i=n.slice(0),_=new Uint32Array(i.buffer),f=w(i,r),l=f[0],o=f[1],$=n.length,a=new Uint8Array($>>2),s;if(n.length<2e7)for(var u=0;u<$;u+=4)s=v(l,c=n[u]*(1/255),h=n[u+1]*(1/255),d=n[u+2]*(1/255),A=n[u+3]*(1/255)),a[u>>2]=s.ind,_[u>>2]=s.est.rgba;else for(u=0;u<$;u+=4){var c=n[u]*(1/255),h=n[u+1]*(1/255),d=n[u+2]*(1/255),A=n[u+3]*(1/255);for(s=l;s.left;)s=0>=b(s.est,c,h,d,A)?s.left:s.right;a[u>>2]=s.ind,_[u>>2]=s.est.rgba}return{abuf:i.buffer,inds:a,plte:o}}function w(e,r,n){null==n&&(n=1e-4);let i=new Uint32Array(e.buffer),_={i0:0,i1:e.length,bst:null,est:null,tdst:0,left:null,right:null};_.bst=y(e,_.i0,_.i1),_.est=F(_.bst);let f=[_];for(;f.length<r;){let l=0,o=0;for(var $=0;$<f.length;$++)f[$].est.L>l&&(l=f[$].est.L,o=$);if(l<n)break;let a=f[o],s=m(e,i,a.i0,a.i1,a.est.e,a.est.eMq255);if(a.i0>=s||a.i1<=s){a.est.L=0;continue}let u={i0:a.i0,i1:s,bst:null,est:null,tdst:0,left:null,right:null};u.bst=y(e,u.i0,u.i1),u.est=F(u.bst);let c={i0:s,i1:a.i1,bst:null,est:null,tdst:0,left:null,right:null};for($=0,c.bst={R:[],m:[],N:a.bst.N-u.bst.N};$<16;$++)c.bst.R[$]=a.bst.R[$]-u.bst.R[$];for($=0;$<4;$++)c.bst.m[$]=a.bst.m[$]-u.bst.m[$];c.est=F(c.bst),a.left=u,a.right=c,f[o]=u,f.push(c)}for(f.sort((e,r)=>r.bst.N-e.bst.N),$=0;$<f.length;$++)f[$].ind=$;return[_,f]}function v(e,r,n,i,_){if(null==e.left)return e.tdst=function e(r,n,i,_,f){let l=n-r[0],o=i-r[1],$=_-r[2],a=f-r[3];return l*l+o*o+$*$+a*a}(e.est.q,r,n,i,_),e;let f=b(e.est,r,n,i,_),l=e.left,o=e.right;f>0&&(l=e.right,o=e.left);let $=v(l,r,n,i,_);if($.tdst<=f*f)return $;let a=v(o,r,n,i,_);return a.tdst<$.tdst?a:$}function b(e,r,n,i,_){let{e:f}=e;return f[0]*r+f[1]*n+f[2]*i+f[3]*_-e.eMq}function m(e,r,n,i,_,f){for(i-=4;n<i;){for(;E(e,n,_)<=f;)n+=4;for(;E(e,i,_)>f;)i-=4;if(n>=i)break;let l=r[n>>2];r[n>>2]=r[i>>2],r[i>>2]=l,n+=4,i-=4}for(;E(e,n,_)>f;)n-=4;return n+4}function E(e,r,n){return e[r]*n[0]+e[r+1]*n[1]+e[r+2]*n[2]+e[r+3]*n[3]}function y(e,r,n){let i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],_=[0,0,0,0];for(let f=r;f<n;f+=4){let l=e[f]*(1/255),o=e[f+1]*(1/255),$=e[f+2]*(1/255),a=e[f+3]*(1/255);_[0]+=l,_[1]+=o,_[2]+=$,_[3]+=a,i[0]+=l*l,i[1]+=l*o,i[2]+=l*$,i[3]+=l*a,i[5]+=o*o,i[6]+=o*$,i[7]+=o*a,i[10]+=$*$,i[11]+=$*a,i[15]+=a*a}return i[4]=i[1],i[8]=i[2],i[9]=i[6],i[12]=i[3],i[13]=i[7],i[14]=i[11],{R:i,m:_,N:n-r>>2}}function F(e){let{R:r}=e,{m:n}=e,{N:i}=e,_=n[0],f=n[1],l=n[2],o=n[3],$=0==i?0:1/i,a=[r[0]-_*_*$,r[1]-_*f*$,r[2]-_*l*$,r[3]-_*o*$,r[4]-f*_*$,r[5]-f*f*$,r[6]-f*l*$,r[7]-f*o*$,r[8]-l*_*$,r[9]-l*f*$,r[10]-l*l*$,r[11]-l*o*$,r[12]-o*_*$,r[13]-o*f*$,r[14]-o*l*$,r[15]-o*o*$,],s=a,u=B,c=[Math.random(),Math.random(),Math.random(),Math.random()],h=0,d=0;if(0!=i)for(let A=0;A<16&&(c=u.multVec(s,c),d=Math.sqrt(u.dot(c,c)),c=u.sml(1/d,c),!(0!=A&&1e-9>Math.abs(d-h)));A++)h=d;let g=[_*$,f*$,l*$,o*$];return{Cov:a,q:g,e:c,L:h,eMq255:u.dot(u.sml(255,g),c),eMq:u.dot(c,g),rgba:(Math.round(255*g[3])<<24|Math.round(255*g[2])<<16|Math.round(255*g[1])<<8|Math.round(255*g[0])<<0)>>>0}}var B={multVec:(e,r)=>[e[0]*r[0]+e[1]*r[1]+e[2]*r[2]+e[3]*r[3],e[4]*r[0]+e[5]*r[1]+e[6]*r[2]+e[7]*r[3],e[8]*r[0]+e[9]*r[1]+e[10]*r[2]+e[11]*r[3],e[12]*r[0]+e[13]*r[1]+e[14]*r[2]+e[15]*r[3],],dot:(e,r)=>e[0]*r[0]+e[1]*r[1]+e[2]*r[2]+e[3]*r[3],sml:(e,r)=>[e*r[0],e*r[1],e*r[2],e*r[3]]};s.encode=function e(r,n,i,_,f,l,o){null==_&&(_=0),null==o&&(o=!1);let a=c(r,n,i,_,[!1,!1,!1,0,o,!1]);return u(a,-1),$(a,n,i,f,l)},s.encodeLL=function e(r,n,i,_,f,l,o,a){let s={ctype:0+(1==_?0:2)+(0==f?0:4),depth:l,frames:[]},c=(_+f)*l,h=c*n;for(let d=0;d<r.length;d++)s.frames.push({rect:{x:0,y:0,width:n,height:i},img:new Uint8Array(r[d]),blend:0,dispose:1,bpp:Math.ceil(c/8),bpl:Math.ceil(h/8)});return u(s,0,!0),$(s,n,i,o,a)},s.encode.compress=c,s.encode.dither=o,s.quantize=p,s.quantize.getKDtree=w,s.quantize.getNearest=v}();let u={toArrayBuffer(e,r){let n=e.width,i=e.height,_=n<<2,f=e.getContext("2d").getImageData(0,0,n,i),l=new Uint32Array(f.data.buffer),o=(32*n+31)/32<<2,$=o*i,a=122+$,s=new ArrayBuffer(a),c=new DataView(s),h,d,A,g,p=1048576,w=0,v=0,b=0;function m(e){c.setUint16(v,e,!0),v+=2}function E(e){c.setUint32(v,e,!0),v+=4}function y(e){v+=e}m(19778),E(a),v+=4,E(122),E(108),E(n),E(-i>>>0),m(1),m(32),E(3),E($),E(2835),E(2835),v+=8,E(16711680),E(65280),E(255),E(4278190080),E(1466527264),function e(){for(;w<i&&p>0;){for(g=122+w*o,h=0;h<_;)p--,A=(d=l[b++])>>>24,c.setUint32(g+h,d<<8|A),h+=4;w++}b<l.length?(p=1048576,setTimeout(e,u._dly)):r(s)}()},toBlob(e,r){this.toArrayBuffer(e,e=>{r(new Blob([e],{type:"image/bmp"}))})},_dly:9};var c={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},h={[c.CHROME]:16384,[c.FIREFOX]:11180,[c.DESKTOP_SAFARI]:16384,[c.IE]:8192,[c.IOS]:4096,[c.ETC]:8192};let d="undefined"!=typeof window,A="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,g=d&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),p=(d||A)&&(g&&g.getOriginalSymbol(window,"File")||"undefined"!=typeof File&&File),w=(d||A)&&(g&&g.getOriginalSymbol(window,"FileReader")||"undefined"!=typeof FileReader&&FileReader);function v(e,r,n=Date.now()){return new Promise(i=>{let _=e.split(","),f=_[0].match(/:(.*?);/)[1],l=globalThis.atob(_[1]),o=l.length,$=new Uint8Array(o);for(;o--;)$[o]=l.charCodeAt(o);let a=new Blob([$],{type:f});a.name=r,a.lastModified=n,i(a)})}function b(e){return new Promise((r,n)=>{let i=new w;i.onload=()=>r(i.result),i.onerror=e=>n(e),i.readAsDataURL(e)})}function m(e){return new Promise((r,n)=>{let i=new Image;i.onload=()=>r(i),i.onerror=e=>n(e),i.src=e})}function E(){if(void 0!==E.cachedResult)return E.cachedResult;let e=c.ETC,{userAgent:r}=navigator;return/Chrom(e|ium)/i.test(r)?e=c.CHROME:/iP(ad|od|hone)/i.test(r)&&/WebKit/i.test(r)?e=c.IOS:/Safari/i.test(r)?e=c.DESKTOP_SAFARI:/Firefox/i.test(r)?e=c.FIREFOX:(/MSIE/i.test(r)||!0==!!document.documentMode)&&(e=c.IE),E.cachedResult=e,E.cachedResult}function y(e,r){let n=E(),i=h[n],_=e,f=r,l=_*f,o=_>f?f/_:_/f;for(;l>i*i;){let $=(i+_)/2,a=(i+f)/2;$<a?(f=a,_=a*o):(f=$*o,_=$),l=_*f}return{width:_,height:f}}function F(e,r){let n,i;try{if(i=(n=new OffscreenCanvas(e,r)).getContext("2d"),null===i)throw Error("getContext of OffscreenCanvas returns null")}catch(_){i=(n=document.createElement("canvas")).getContext("2d")}return n.width=e,n.height=r,[n,i]}function B(e,r){let{width:n,height:i}=y(e.width,e.height),[_,f]=F(n,i);return r&&/jpe?g/.test(r)&&(f.fillStyle="white",f.fillRect(0,0,_.width,_.height)),f.drawImage(e,0,0,_.width,_.height),_}function Q(){return void 0!==Q.cachedResult||(Q.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"undefined"!=typeof document&&"ontouchend"in document),Q.cachedResult}function I(e,r={}){return new Promise(function(n,i){let _,f;var l=function(){try{return f=B(_,r.fileType||e.type),n([_,f])}catch(l){return i(l)}},o=function(r){try{var n=function(e){try{throw e}catch(r){return i(r)}};try{let f;return b(e).then(function(e){try{return f=e,m(f).then(function(e){try{return _=e,function(){try{return l()}catch(e){return i(e)}}()}catch(r){return n(r)}},n)}catch(r){return n(r)}},n)}catch(o){n(o)}}catch($){return i($)}};try{if(Q()||[c.DESKTOP_SAFARI,c.MOBILE_SAFARI].includes(E()))throw Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(e).then(function(e){try{return _=e,l()}catch(r){return o()}},o)}catch($){o()}})}function C(e,r,n,i,_=1){return new Promise(function(f,l){let o;if("image/png"===r){let $,a,c;return $=e.getContext("2d"),{data:a}=$.getImageData(0,0,e.width,e.height),c=s.encode([a.buffer],e.width,e.height,4096*_),(o=new Blob([c],{type:r})).name=n,o.lastModified=i,g.call(this)}if("image/bmp"===r)return new Promise(r=>u.toBlob(e,r)).then((function(e){try{return(o=e).name=n,o.lastModified=i,A.call(this)}catch(r){return l(r)}}).bind(this),l);if("function"==typeof OffscreenCanvas&&e instanceof OffscreenCanvas)return e.convertToBlob({type:r,quality:_}).then((function(e){try{return(o=e).name=n,o.lastModified=i,d.call(this)}catch(r){return l(r)}}).bind(this),l);{let h;return v(h=e.toDataURL(r,_),n,i).then((function(e){try{return o=e,d.call(this)}catch(r){return l(r)}}).bind(this),l)}function d(){return A.call(this)}function A(){return g.call(this)}function g(){return f(o)}})}function U(e){e.width=0,e.height=0}function x(){return new Promise(function(e,r){let n,i,_,f,l;return void 0!==x.cachedResult?e(x.cachedResult):(n="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==",v("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(n){try{return i=n,I(i).then(function(n){try{return _=n[1],C(_,i.type,i.name,i.lastModified).then(function(n){try{return f=n,U(_),I(f).then(function(n){try{return l=n[0],x.cachedResult=1===l.width&&2===l.height,e(x.cachedResult)}catch(i){return r(i)}},r)}catch(i){return r(i)}},r)}catch(o){return r(o)}},r)}catch(o){return r(o)}},r))})}function T(e){return new Promise((r,n)=>{let i=new w;i.onload=e=>{let n=new DataView(e.target.result);if(65496!=n.getUint16(0,!1))return r(-2);let i=n.byteLength,_=2;for(;_<i&&!(8>=n.getUint16(_+2,!1));){let f=n.getUint16(_,!1);if(_+=2,65505==f){if(1165519206!=n.getUint32(_+=2,!1))return r(-1);let l=18761==n.getUint16(_+=6,!1);_+=n.getUint32(_+4,l);let o=n.getUint16(_,l);_+=2;for(let $=0;$<o;$++)if(274==n.getUint16(_+12*$,l))return r(n.getUint16(_+12*$+8,l))}else{if(65280!=(65280&f))break;_+=n.getUint16(_,!1)}}return r(-1)},i.onerror=e=>n(e),i.readAsArrayBuffer(e)})}function R(e,r){let{width:n}=e,{height:i}=e,{maxWidthOrHeight:_}=r,f,l=e;return isFinite(_)&&(n>_||i>_)&&([l,f]=F(n,i),n>i?(l.width=_,l.height=i/n*_):(l.width=n/i*_,l.height=_),f.drawImage(e,0,0,l.width,l.height),U(e)),l}function S(e,r){let{width:n}=e,{height:i}=e,[_,f]=F(n,i);switch(r>4&&r<9?(_.width=i,_.height=n):(_.width=n,_.height=i),r){case 2:f.transform(-1,0,0,1,n,0);break;case 3:f.transform(-1,0,0,-1,n,i);break;case 4:f.transform(1,0,0,-1,0,i);break;case 5:f.transform(0,1,1,0,0,0);break;case 6:f.transform(0,1,-1,0,i,0);break;case 7:f.transform(0,-1,-1,0,i,n);break;case 8:f.transform(0,-1,1,0,0,n)}return f.drawImage(e,0,0,n,i),U(e),_}function H(e,r,n=0){return new Promise(function(i,_){let f,l,o,$,a,s,u,c,h,d,A,g,p,w,v,b,m,E,y,B;function Q(e=5){if(r.signal&&r.signal.aborted)throw r.signal.reason;f+=e,r.onProgress(Math.min(f,100))}function H(e){if(r.signal&&r.signal.aborted)throw r.signal.reason;f=Math.min(Math.max(e,f),100),r.onProgress(f)}return f=n,l=r.maxIteration||10,o=1024*r.maxSizeMB*1024,Q(),I(e,r).then((function(n){try{return[,$]=n,Q(),a=R($,r),Q(),new Promise(function(n,i){var _;if(!(_=r.exifOrientation))return T(e).then((function(e){try{return _=e,f.call(this)}catch(r){return i(r)}}).bind(this),i);function f(){return n(_)}return f.call(this)}).then((function(n){try{return s=n,Q(),x().then((function(n){try{return u=n?a:S(a,s),Q(),c=r.initialQuality||1,h=r.fileType||e.type,C(u,h,e.name,e.lastModified,c).then((function(n){try{var f;if(d=n,Q(),A=d.size>o,g=d.size>e.size,!A&&!g)return H(100),i(d);function s(){if(l--&&(v>o||v>p)){let r,n;return r=B?.95*y.width:y.width,n=B?.95*y.height:y.height,[m,E]=F(r,n),E.drawImage(y,0,0,r,n),c*="image/png"===h?.85:.95,C(m,h,e.name,e.lastModified,c).then(function(e){try{return b=e,U(y),y=m,v=b.size,H(Math.min(99,Math.floor((w-v)/(w-o)*100))),s}catch(r){return _(r)}},_)}return[1]}return p=e.size,v=w=d.size,y=u,B=!r.alwaysKeepResolution&&A,(f=(function(e){for(;e;){if(e.then)return void e.then(f,_);try{if(e.pop){if(e.length)return e.pop()?I.call(this):e;e=s}else e=e.call(this)}catch(r){return _(r)}}}).bind(this))(s);function I(){return U(y),U(m),U(a),U(u),U($),H(100),i(b)}}catch(x){return _(x)}}).bind(this),_)}catch(f){return _(f)}}).bind(this),_)}catch(f){return _(f)}}).bind(this),_)}catch(f){return _(f)}}).bind(this),_)})}let M;function O(r,n){return new Promise(function(i,_){let f,l,o,$,a,s;if(f={...n},o=0,{onProgress:$}=f,f.maxSizeMB=f.maxSizeMB||Number.POSITIVE_INFINITY,a="boolean"!=typeof f.useWebWorker||f.useWebWorker,delete f.useWebWorker,f.onProgress=e=>{o=e,"function"==typeof $&&$(o)},!(r instanceof Blob||r instanceof p))return _(Error("The file given is not an instance of Blob or File"));if(!/^image/.test(r.type))return _(Error("The file given is not an image"));if(s="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,!a||"function"!=typeof Worker||s)return H(r,f).then((function(e){try{return l=e,g.call(this)}catch(r){return _(r)}}).bind(this),_);var u,c,h=(function(){try{return g.call(this)}catch(e){return _(e)}}).bind(this),d=function(e){try{return H(r,f).then(function(e){try{return l=e,h()}catch(r){return _(r)}},_)}catch(n){return _(n)}};try{return(u=r,c=f,new Promise((e,r)=>{M||(M=function e(r){let n=[];return"function"==typeof r?n.push(`(${r})()`):n.push(r),URL.createObjectURL(new Blob(n))}("\nlet scriptImported = false\nself.addEventListener('message', async (e) => {\n  const { file, id, options } = e.data\n  options.onProgress = (progress) => self.postMessage({ progress, id })\n  try {\n    // Image compression logic or function should be defined or already available here\n    const compressedFile = await imageCompression(file, options)\n    self.postMessage({ file: compressedFile, id })\n  } catch (e) {\n    self.postMessage({ error: e.message + '\\n' + e.stack, id })\n  }\n})\n"));let n=new Worker(M);n.addEventListener("message",function i(_){if(c.signal&&c.signal.aborted)n.terminate();else if(void 0===_.data.progress){if(_.data.error)return r(Error(_.data.error)),void n.terminate();e(_.data.file),n.terminate()}else c.onProgress(_.data.progress)}),n.addEventListener("error",r),c.signal&&c.signal.addEventListener("abort",()=>{r(c.signal.reason),n.terminate()}),n.postMessage({file:u,imageCompressionLibUrl:c.libURL,options:{...c,onProgress:void 0,signal:void 0}})})).then(function(e){try{return l=e,h()}catch(r){return d()}},d)}catch(A){d()}function g(){try{l.name=r.name,l.lastModified=r.lastModified}catch(n){}try{f.preserveExif&&"image/jpeg"===r.type&&(!f.fileType||f.fileType&&f.fileType===r.type)&&(l=e(r,l))}catch(_){}return i(l)}})}return O.getDataUrlFromFile=b,O.getFilefromDataUrl=v,O.loadImage=m,O.drawImageInCanvas=B,O.drawFileInCanvas=I,O.canvasToFile=C,O.getExifOrientation=T,O.handleMaxWidthOrHeight=R,O.followExifOrientation=S,O.cleanupCanvasMemory=U,O.isAutoOrientationInBrowser=x,O.approximateBelowMaximumCanvasSizeOfBrowser=y,O.copyExifWithoutOrientation=e,O.getBrowserName=E,O.version="2.0.2",O});